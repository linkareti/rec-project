<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:lnk="http://java.sun.com/jsf/composite/lnk">

	<h:panelGroup id="birth_registration_second_parent" layout="block"
		rendered="#{birthRegistrationController.showSecondParent}">
		<div class="container-background">
			<div class="container">
				<span class="responsible"> <h:outputText
						value="#{messages['birthRegistration.identification.responsible']}" />
				</span>
				<h2>
					<h:outputText
						value="#{messages['birthRegistration.identification.title']}" />
				</h2>
				<h2 id="registration-state">
					<span> <p:commandLink
							value="#{messages['birthRegistration.step1']}"
							action="#{birthRegistrationController.moveToFirstParentSection()}"
							process="@form" update="@form"
							onstart="PF('mainContentBUI').show();PrimeFaces.scrollTo('page-top')"
							oncomplete="PF('mainContentBUI').hide()">
							<f:param name="disableValidation" value="#{true}" />
						</p:commandLink>
					</span> <i class="fa fa-chevron-right" /> <span class="active"> <h:outputText
							value="#{messages['birthRegistration.step2']}" />
					</span> <i class="fa fa-chevron-right" /> <span> <h:outputText
							value="#{messages['birthRegistration.step3']}" />
					</span> <i class="fa fa-chevron-right" /> <span> <h:outputText
							value="#{messages['birthRegistration.step4']}" />
					</span> <i class="fa fa-chevron-right" /> <span> <h:outputText
							value="#{messages['birthRegistration.step5']}" />
					</span>


				</h2>
			</div>
		</div>
		<div class="container">
			<div class="panel">
				<h3 class="heading">

					<a data-toggle="collapse" data-target="#first-parent-info"> <h:outputText
							value="#{messages['birthRegistration.secondParent']}" /><i
						class="fa fa-info-circle"></i>
					</a>
				</h3>
				<div id="first-parent-info" class="panel-collapse collapse">
					<div class="panel-body info">
						<div class="row">
							<div class="col-xs-6">
								<p>
									<h:outputText
										value="#{messages['birthRegistration.secondParent.help.left-content']}"
										escape="false" />
								</p>
							</div>
							<div class="col-xs-6">
								<p>
									<h:outputText
										value="#{messages['birthRegistration.secondParent.help.right-content']}"
										escape="false" />
								</p>
							</div>
						</div>
					</div>
				</div>
			</div>

			<h:panelGroup id="birth_registration_second_parent_container"
				layout="block">

				<div class="row">
					<div class="col-md-12">

						<f:validateBean disabled="#{param['disableValidation'] eq true}"
							validationGroups="com.linkare.irn.nascimento.model.validation.BirthRegistrationSecondParentValidation">

							<p:focus context="birth_registration_second_parent_container"
								rendered="#{facesContext.validationFailed}" />

							<div class="form-content">

								<ui:fragment rendered="#{birthRegistrationController.editMode}">

									<h:panelGroup id="secondParentData" layout="block">
										<p:panel>
											<div class="row">
												<ui:fragment
													rendered="#{birthRegistrationController.birthRegistration.firstParent.maritalStatus.married}">
													<div class="col-md-6">
														<p:outputLabel
															value="#{messages['parent.marriedWithSecondParent']}"
															for="parentsMarriedWithEachOther" />
														<p:selectOneRadio id="parentsMarriedWithEachOther"
															value="#{birthRegistrationController.parentsMarriedWithEachOther}"
															required="#{empty param['disableValidation'] or param['disableValidation'] eq false}">
															<f:selectItem itemValue="#{true}"
																itemLabel="#{messages['label.yes']}" />
															<f:selectItem itemValue="#{false}"
																itemLabel="#{messages['label.no']}" />
															<f:param name="disableValidation" value="#{true}" />
															<p:ajax process="@this" update="secondParentData"
																listener="#{birthRegistrationController.onParentsMarriedWithEachOtherChange()}"
																partialSubmit="true" />
														</p:selectOneRadio>
														<div class="clearfix" />
														<p:message for="parentsMarriedWithEachOther" />
													</div>
												</ui:fragment>

												<ui:fragment
													rendered="#{birthRegistrationController.birthRegistration.firstParent.maritalStatus.divorced or birthRegistrationController.birthRegistration.firstParent.maritalStatus.widower or birthRegistrationController.birthRegistration.firstParent.maritalStatus.separated}">
													<div class="col-md-6">
														<p:outputLabel
															value="#{messages['parent.wereMarriedWithSecondParent']}"
															for="parentsMarriedWithEachOther" />
														<p:selectOneRadio id="parentsWereMarriedWithEachOther"
															value="#{birthRegistrationController.parentsWereMarriedWithEachOther}"
															required="#{empty param['disableValidation'] or param['disableValidation'] eq false}">
															<f:selectItem itemValue="#{true}"
																itemLabel="#{messages['label.yes']}" />
															<f:selectItem itemValue="#{false}"
																itemLabel="#{messages['label.no']}" />
															<f:param name="disableValidation" value="#{true}" />
															<p:ajax process="@this" update="secondParentData"
																listener="#{birthRegistrationController.onParentsWereMarriedWithEachOtherChange()}"
																partialSubmit="true" />
														</p:selectOneRadio>
														<div class="clearfix" />
														<p:message for="parentsWereMarriedWithEachOther" />
													</div>
												</ui:fragment>

												<ui:fragment
													rendered="#{birthRegistrationController.birthRegistration.firstParent.maritalStatus.single or birthRegistrationController.parentsMarriedWithEachOther eq false or birthRegistrationController.parentsWereMarriedWithEachOther eq false}">
													<div class="col-md-6">
														<p:outputLabel
															value="#{messages['parent.knowSecondParent']}"
															for="parentsMarriedWithEachOther" />
														<p:selectOneRadio id="parentsKnowEachOther"
															value="#{birthRegistrationController.parentsKnowEachOther}"
															required="#{empty param['disableValidation'] or param['disableValidation'] eq false}">
															<f:selectItem itemValue="#{true}"
																itemLabel="#{messages['label.yes']}" />
															<f:selectItem itemValue="#{false}"
																itemLabel="#{messages['label.no']}" />
															<f:param name="disableValidation" value="#{true}" />
															<p:ajax process="@this" update="secondParentData"
																listener="#{birthRegistrationController.onParentsKnowEachOtherChange()}"
																partialSubmit="true" />
														</p:selectOneRadio>
														<div class="clearfix" />
														<p:message for="parentsKnowEachOther" />
													</div>
												</ui:fragment>
												<ui:fragment
													rendered="#{birthRegistrationController.parentsMarriedWithEachOther eq true or birthRegistrationController.parentsWereMarriedWithEachOther eq true or birthRegistrationController.parentsKnowEachOther eq true}">
													<div class="col-md-6">
														<p:outputLabel value="#{messages['parent.deceased']}"
															for="secondParentDeceased" />
														<p:selectOneRadio id="secondParentDeceased"
															value="#{birthRegistrationController.birthRegistration.secondParent.deceased}">
															<f:selectItem itemValue="#{true}"
																itemLabel="#{messages['label.yes']}" />
															<f:selectItem itemValue="#{false}"
																itemLabel="#{messages['label.no']}" />
															<f:param name="disableValidation" value="#{true}" />
															<p:ajax process="@this" update="secondParentData"
																listener="#{birthRegistrationController.onSecondParentDeceasedChange(birthRegistrationController.birthRegistration.secondParent)}"
																partialSubmit="true"
																disabled="#{birthRegistrationController.parentsMarriedWithEachOther eq true}" />
															<p:ajax process="@this" update="secondParentData"
																partialSubmit="true"
																disabled="#{birthRegistrationController.parentsMarriedWithEachOther eq false}"/>
														</p:selectOneRadio>
														<div class=" clearfix" />
															<p:message for="secondParentDeceased" />
													</div>
												</ui:fragment>
											</div>
										</p:panel>

										<ui:fragment
											rendered="#{not empty birthRegistrationController.birthRegistration.secondParent and birthRegistrationController.birthRegistration.secondParent.deceased eq true and not birthRegistrationController.parentsMarriedWithEachOther}">
											<div class="alert alert-info text-center">
												<i class="fa fa-info-circle"></i>
												<h:outputText value="#{' '}" />
												<h:outputText
													value="#{messages['parent.deceased.noConfirmationMessage']}"
													escape="false" />
											</div>
										</ui:fragment>

										<ui:fragment
											rendered="#{not empty birthRegistrationController.birthRegistration.secondParent and (birthRegistrationController.birthRegistration.secondParent.deceased eq false or birthRegistrationController.parentsMarriedWithEachOther eq true)}">

											<ui:include
												src="includes/second_parent/edit/edit_second_parent_identification_data.xhtml" />
											<ui:include
												src="includes/second_parent/edit/edit_second_parent_naturality_data.xhtml" />
											<ui:include
												src="includes/second_parent/edit/edit_second_parent_parents_data.xhtml" />
											<ui:include
												src="includes/second_parent/edit/edit_second_parent_contacts_data.xhtml" />
										</ui:fragment>
									</h:panelGroup>
								</ui:fragment>

								<ui:fragment
									rendered="#{not birthRegistrationController.editMode}">
									<ui:fragment
										rendered="#{empty birthRegistrationController.birthRegistration.secondParent}">
										<div class="alert alert-info">
											<h:outputText
												value="#{messages['birthRegistration.secondParent.unknown']}" />
										</div>
									</ui:fragment>
									<ui:fragment
										rendered="#{not empty birthRegistrationController.birthRegistration.secondParent and birthRegistrationController.birthRegistration.secondParent.deceased eq true}">
										<div class="alert alert-info">
											<h:outputText
												value="#{messages['birthRegistration.secondParent.deceased']}" />
										</div>
									</ui:fragment>
									<ui:fragment
										rendered="#{not empty birthRegistrationController.birthRegistration.secondParent and birthRegistrationController.birthRegistration.secondParent.deceased eq false}">

										<lnk:viewParentIdentificationData
											parentData="#{birthRegistrationController.birthRegistration.secondParent}" />
										<lnk:viewParentNaturalityData
											parentData="#{birthRegistrationController.birthRegistration.secondParent}" />
										<lnk:viewParentParentsData
											parentData="#{birthRegistrationController.birthRegistration.secondParent}" />
										<lnk:viewParentContactsData
											parentData="#{birthRegistrationController.birthRegistration.secondParent}" />
									</ui:fragment>
								</ui:fragment>
							</div>
						</f:validateBean>

						<div class="row actions">
							<div class="col-sm-12">
								<p:commandButton icon="fa fa-chevron-left" iconPos="left"
									action="#{birthRegistrationController.moveToFirstParentSection()}"
									value="#{messages['button.previous']}"
									styleClass="ui-priority-default prevstep"
									process="birth_registration_second_parent_container"
									update="@form" onstart="PF('mainContentBUI').show()"
									oncomplete="PF('mainContentBUI').hide();PrimeFaces.scrollTo('page-top')"
									partialSubmit="true">
									<f:param name="disableValidation" value="#{true}" />
								</p:commandButton>
								&#160;
								<p:commandButton icon="fa fa-chevron-right" iconPos="right"
									action="#{birthRegistrationController.moveToRegistrationSection()}"
									value="#{messages['button.next']}"
									styleClass="ui-priority-primary nextstep"
									process="birth_registration_second_parent_container"
									update="@form" onstart="PF('mainContentBUI').show()"
									oncomplete="PF('mainContentBUI').hide(); if(!args.validationFailed) { PrimeFaces.scrollTo('page-top'); }"
									partialSubmit="true">
								</p:commandButton>
							</div>
						</div>
					</div>
				</div>
			</h:panelGroup>
		</div>
	</h:panelGroup>

</ui:composition>