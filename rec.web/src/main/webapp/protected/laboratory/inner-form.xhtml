<h:form xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        enctype="multipart/form-data">
    <p:panel id="panel" header="#{title}" style="margin-bottom:10px;">
        <h:inputHidden id="idInternal"
                       value="#{laboratoryController.selected.idInternal}"
                       rendered="#{operation != 'create'}" />
        <h:inputHidden id="version"
                       value="#{laboratoryController.selected.version}"
                       rendered="#{operation != 'create'}" />
        <p:focus for="name" />
        <h:panelGrid columns="3">
            <h:outputLabel value="#{bundle['laboratory.name']}" for="name" />
            <p:inputText id="name" value="#{laboratoryController.selected.name}"
                         title="#{bundle['laboratory.name']}" required="true"
                         label="#{bundle['laboratory.name']}"
                         rendered="#{operation != 'view'}" 
                         style="width: 350px"/>
            <h:outputText id="nameOut" value="#{laboratoryController.selected.name}" rendered="#{operation == 'view'}"/>
            <p:message for="name" />
            <h:outputLabel value="#{bundle['laboratory.description']}"
                           for="description" />
            <p:inputText id="description"
                         value="#{laboratoryController.selected.description}"
                         title="#{bundle['laboratory.description']}"
                         rendered="#{operation != 'view'}" 
                         style="width: 350px"/>
            <h:outputText id="descriptionOut" value="#{laboratoryController.selected.description}" rendered="#{operation == 'view'}"/>
            <p:message for="description" />

            <h:outputLabel value="#{bundle['laboratory.jmx.url']}"
                           for="jmxUrl" />
            <p:inputText id="jmxUrl"
                         value="#{laboratoryController.selected.jmxURL}"
                         title="#{bundle['laboratory.jmx.url']}"
                         rendered="#{operation != 'view'}" 
                         style="width: 350px"
                         required="true"/>
            <h:outputText id="jmxUrlOut" value="#{laboratoryController.selected.jmxURL}" rendered="#{operation == 'view'}"/>
            <p:message for="jmxUrl" />

            <h:outputLabel value="#{bundle['laboratory.jmx.user']}"
                           for="jmxUser" />
            <p:inputText id="jmxUser"
                         value="#{laboratoryController.selected.jmxUser}"
                         title="#{bundle['laboratory.jmx.user']}"
                         rendered="#{operation != 'view'}" 
                         style="width: 350px"
                         required="true"/>
            <h:outputText id="jmxUserOut" value="#{laboratoryController.selected.jmxUser}" rendered="#{operation == 'view'}"/>
            <p:message for="jmxUser" />

            <h:outputLabel value="#{bundle['laboratory.jmx.pass']}"
                           for="jmxPass" rendered="#{operation != 'view'}" />
            <p:password id="jmxPass"
                        value="#{laboratoryController.selected.jmxPass}"
                        title="#{bundle['laboratory.jmx.pass']}"
                        label="#{bundle['laboratory.jmx.pass']}" inline="true"
                        rendered="#{operation != 'view'}" />
            <p:message for="jmxPass" rendered="#{operation != 'view'}" />

            <h:outputLabel value="#{bundle['laboratory.state.label']}"
                           for="stateLabel" />
            <p:inputText id="stateLabel"
                         value="#{laboratoryController.selected.state.label}"
                         title="#{bundle['laboratory.state.label']}"
                         rendered="#{operation != 'view'}" 
                         style="width: 350px"/>
            <h:outputText id="stateLabelOut" value="#{laboratoryController.selected.state.label}" rendered="#{operation == 'view'}"/>
            <p:message for="stateLabel" />

            <h:outputLabel value="#{bundle['laboratory.state.helpMessage']}"
                           for="stateHelpMessage" />
            <p:inputText id="stateHelpMessage"
                         value="#{laboratoryController.selected.state.helpMessage}"
                         title="#{bundle['laboratory.state.helpMessage']}"
                         rendered="#{operation != 'view'}" 
                         style="width: 350px"/>
            <h:outputText id="stateHelpMessageOut" value="#{laboratoryController.selected.state.helpMessage}" rendered="#{operation == 'view'}"/>
            <p:message for="stateHelpMessage" />
            <h:outputLabel value="#{bundle['laboratory.state.url']}"
                           for="stateURL" />
            <p:inputText id="stateURL"
                         value="#{laboratoryController.selected.state.url}"
                         title="#{bundle['laboratory.state.url']}"
                         rendered="#{operation != 'view'}" style="width: 350px"/>
            <h:outputText id="stateURLOut" value="#{laboratoryController.selected.state.url}" rendered="#{operation == 'view'}"/> 
            <p:message for="stateURL" />
            <h:outputLabel value="#{bundle['laboratory.state.isActive']}"
                           for="stateActive" />
            <p:selectBooleanCheckbox id="stateActive"
                                     value="#{laboratoryController.selected.state.active}"
                                     disabled="#{operation == 'view'}"/>
            <p:message for="stateActive" />

            <h:outputLabel value="#{bundle['laboratory.rec.face.config.url']}" for="recFaceConfigUrl" />
            <p:inputText id="recFaceConfigUrl" value="#{laboratoryController.selected.recFaceConfigUrl}"
                         title="#{bundle['laboratory.rec.face.config.url']}"
                         label="#{bundle['laboratory.rec.face.config.url']}"
                         rendered="#{operation != 'view'}"
                         style="width: 350px"/>
            <h:outputText id="recFaceConfigUrlOut"
                          value="#{laboratoryController.selected.recFaceConfigUrl}"
                          rendered="#{operation == 'view'}"/>
            <p:message for="recFaceConfigUrl" />

            <h:outputLabel value="#{bundle['gps.latitude']}" for="latitude" />
            <p:inputText id="latitude"
                         value="#{laboratoryController.selected.gpsLocation.latitude}"
                         title="#{bundle['gps.latitude']}"
                         label="#{bundle['gps.latitude']}"
                         rendered="#{operation != 'view'}"/>
            <h:outputText id="latitudeOut"
                          value="#{laboratoryController.selected.gpsLocation.latitude}"
                          rendered="#{operation == 'view'}"/>
            <p:message for="latitude" />

            <h:outputLabel value="#{bundle['gps.longitude']}" for="longitude" />
            <p:inputText id="longitude"
                         value="#{laboratoryController.selected.gpsLocation.longitude}"
                         title="#{bundle['gps.longitude']}"
                         label="#{bundle['gps.longitude']}"
                         rendered="#{operation != 'view'}"/>
            <h:outputText id="longitudeOut"
                          value="#{laboratoryController.selected.gpsLocation.longitude}"
                          rendered="#{operation == 'view'}"/>
            <p:message for="longitude" />

            <h:outputLabel value="#{bundle['laboratory.image']}" for="imageUpload" />
            <p:fileUpload
                    id="imageUpload"
                    value="#{laboratoryController.file}"
                    mode="simple"
                    allowTypes="/(\.|\/)(jpe?g|png)$/"
                    accept=".png, .jpeg, .jpg"
                    sizeLimit="16384"
                    title="#{bundle['laboratory.image']}"
                    label="#{bundle['laboratory.image']}"
                    rendered="#{operation != 'view'}"
                    invalidSizeMessage="#{bundle['laboratory.image.error.size']}"
                    invalidFileMessage="#{bundle['laboratory.image.error.type']}"/>
            <p:graphicImage
                    id="imageUploadOut"
                    width="150"
                    value="#{laboratoryController.imageUploaded}"
                    style="border: solid;"
                    rendered="#{laboratoryController.imageAvailable}">
                <f:param name="laboratory" value="#{laboratoryController.selected.idInternal}"/>
            </p:graphicImage>
            <p:message for="imageUpload" />
        </h:panelGrid>

        <h:panelGroup rendered="#{operation == 'create'}">
            <p:commandButton action="#{laboratoryController.create}" value="#{bundle['operation.save']}"  ajax="false"/>
        </h:panelGroup>
        <h:panelGroup rendered="#{operation == 'edit'}">
            <p:commandButton action="#{laboratoryController.update}" value="#{bundle['operation.save']}"  ajax="false"/>
        </h:panelGroup>
    </p:panel>
</h:form>