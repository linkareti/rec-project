<h:form xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">
    <p:panel id="panel" header="#{title}" style="margin-bottom:10px;">
        <h:inputHidden id="idInternal"
                       value="#{groupController.selected.idInternal}" />
        <h:inputHidden id="version" value="#{groupController.selected.version}" />
        <h:inputHidden id="current" value="#{groupController.current}"
                       converter="groupConverter" rendered="#{operation != 'create'}" />
        <p:focus for="name" />
        <h:panelGrid columns="3">
            <h:outputLabel value="#{bundle['group.name']}" for="name" />
            <p:inputText id="name" value="#{groupController.selected.name}"
                         title="#{bundle['group.name']}" required="true"
                         label="#{bundle['group.name']}" rendered="#{operation == 'create'}" />
            <h:outputText id="nameOut" value="#{groupController.selected.name}" rendered="#{operation == 'view'}"/> 
            <p:message for="name" />
            <h:outputLabel value="#{bundle['group.childUsers']}" for="members"
                           rendered="#{operation == 'edit'}" />
            <p:pickList id="members" value="#{groupController.users}" var="user"
                        itemLabel="#{user.username}" itemValue="#{user}"
                        converter="userConverter" rendered="#{operation == 'edit'}">
            </p:pickList>
            
            <p:commandButton action="#{groupController.setUsersMembership}"
                           value="#{bundle['operation.submit']}"
                           rendered="#{operation == 'edit'}" ajax="false"/>

        </h:panelGrid>
        <h:panelGroup rendered="#{operation == 'create'}">
             <p:commandButton action="#{groupController.create}" value="#{bundle['operation.save']}"  ajax="false"/>
        </h:panelGroup>
    </p:panel>
</h:form>