/*
 * PlaySineWave.java
 *
 * Created on 25 de Mar�o de 2003, 19:14
 */

package pt.utl.ist.elab.driver.statsound.audio;

/**
 *
 * @author José Pedro Pereira - Linkare TI
 */
public class PlaySineWave extends javax.swing.JFrame 
{
        SoundRecorder sr=null;
        Process proc=null;
	/** Creates new form PlaySineWave */
	public PlaySineWave()
	{
            /*try
            {
                //proc=Runtime.getRuntime().exec("/opt/j2sdk_nb/j2sdk1.4.2/jre/bin/java pt.utl.ist.elab.driver.statsound.audio.SoundProducer");
                proc=Runtime.getRuntime().exec("/home/elab/DEBUG/ReC6.0/driver/eLab/StatSound/StartSoundProducer");
                proc.toString();
            }
            catch(java.io.IOException ioe)
            {
                System.out.println("Could not start Sound Producer!");
                ioe.printStackTrace();
            }*/
		initComponents();
                sr=new SoundRecorder();
	}
	
	/** This method is called from within the constructor to
	 * initialize the form.
	 * WARNING: Do NOT modify this code. The content of this method is
	 * always regenerated by the Form Editor.
	 */
	
    private void initComponents() {//GEN-BEGIN:initComponents
        jPanel1 = new javax.swing.JPanel();
        startPlay = new javax.swing.JButton();
        startCapture = new javax.swing.JButton();
        stopPlay = new javax.swing.JButton();
        stopCapture = new javax.swing.JButton();
        jTextField1 = new javax.swing.JTextField();
        updateFreq = new javax.swing.JButton();

        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent evt) {
                exitForm(evt);
            }
        });

        startPlay.setText("Start Playing");
        startPlay.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                startPlayActionPerformed(evt);
            }
        });

        jPanel1.add(startPlay);

        startCapture.setText("Start Capturing");
        startCapture.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                startCaptureActionPerformed(evt);
            }
        });

        jPanel1.add(startCapture);

        stopPlay.setText("Stop Playing");
        stopPlay.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                stopPlayActionPerformed(evt);
            }
        });

        jPanel1.add(stopPlay);

        stopCapture.setText("Stop Capturing");
        stopCapture.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                stopCaptureActionPerformed(evt);
            }
        });

        jPanel1.add(stopCapture);

        jTextField1.setColumns(5);
        jTextField1.setText("200");
        jPanel1.add(jTextField1);

        updateFreq.setText("Update Freq");
        updateFreq.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                updateFreqActionPerformed(evt);
            }
        });

        jPanel1.add(updateFreq);

        getContentPane().add(jPanel1, java.awt.BorderLayout.SOUTH);

        pack();
    }//GEN-END:initComponents

    private void updateFreqActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_updateFreqActionPerformed
        try
            {
                synchronized(this)
                {
                    java.io.File file = new java.io.File("/home/elab/java/configFiles/freq");
                    java.io.FileWriter fw = new java.io.FileWriter(file);
                    fw.write(jTextField1.getText().trim());
                    fw.close();
                }
            }
            catch(Exception ioe)
            {
            }        
    }//GEN-LAST:event_updateFreqActionPerformed

    private void stopCaptureActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_stopCaptureActionPerformed
       sr.stopAcquiring();
    }//GEN-LAST:event_stopCaptureActionPerformed

    private void stopPlayActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_stopPlayActionPerformed
       synchronized(this)
        {
            try
            {
                java.io.File file = new java.io.File("/home/elab/java/configFiles/stop");
                java.io.FileWriter fw = new java.io.FileWriter(file);
                fw.write("0");
                fw.close();
            }
            catch(Exception e)
            {
            }
        }
    }//GEN-LAST:event_stopPlayActionPerformed
		
	private void startCaptureActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_startCaptureActionPerformed
	{//GEN-HEADEREND:event_startCaptureActionPerformed
            sr.startAcquiring(false);
	}//GEN-LAST:event_startCaptureActionPerformed
	private void startPlayActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_startPlayActionPerformed
	{//GEN-HEADEREND:event_startPlayActionPerformed
            try
            {
                synchronized(this)
                {
                    java.io.File file = new java.io.File("/home/elab/java/configFiles/startFreq");
                    java.io.FileWriter fw = new java.io.FileWriter(file);
                    fw.write(jTextField1.getText().trim());
                    fw.close();
                }
            }
            catch(Exception ioe)
            {
            }
	}//GEN-LAST:event_startPlayActionPerformed
	
	
	/** Exit the Application */
	private void exitForm(java.awt.event.WindowEvent evt)
	{//GEN-FIRST:event_exitForm

            System.exit(0);
	}//GEN-LAST:event_exitForm
	
	/**
	 * @param args the command line arguments
	 */
	public static void main(String args[])
	{
            new PlaySineWave().show();
        }

	
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel jPanel1;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JButton startCapture;
    private javax.swing.JButton startPlay;
    private javax.swing.JButton stopCapture;
    private javax.swing.JButton stopPlay;
    private javax.swing.JButton updateFreq;
    // End of variables declaration//GEN-END:variables
	
}
