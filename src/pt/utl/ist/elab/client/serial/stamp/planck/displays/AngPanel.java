/*
 * AngPanel.java
 *
 * Created on 04 March 2004, 17:41
 */

package pt.utl.ist.elab.client.serial.stamp.planck.displays;

import com.linkare.rec.impl.client.experiment.*;
import com.linkare.rec.data.acquisition.*;
import com.linkare.rec.data.config.*;

/**
 *
 * @author  Andr�
 */
public class AngPanel extends javax.swing.JPanel implements com.linkare.rec.impl.client.experiment.ExpDataDisplay, com.linkare.rec.impl.client.experiment.ExpDataModelListener
{
    java.text.DecimalFormat df = null;
    
    /** Creates new form AngPanel */
    public AngPanel() 
    {
        df = new java.text.DecimalFormat();
        df.setMaximumFractionDigits(2);
        initComponents();
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        jLabel1 = new javax.swing.JLabel();
        jLabelAng = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabelInt = new javax.swing.JLabel();

        setLayout(new java.awt.GridLayout(2, 2));

        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel1.setText("\u00c2ngulo");
        jLabel1.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 0, 0)));
        add(jLabel1);

        jLabelAng.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelAng.setText("0\u00ba");
        jLabelAng.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 0, 0)));
        add(jLabelAng);

        jLabel2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel2.setText("Intensidade");
        jLabel2.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 0, 0)));
        add(jLabel2);

        jLabelInt.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelInt.setText("0 V");
        jLabelInt.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 0, 0)));
        add(jLabelInt);

    }//GEN-END:initComponents

    public void dataModelRunning() 
    {
    }    
    
    public void dataModelStoped() 
    {
    }    
    
    public javax.swing.JComponent getDisplay() 
    {
        return this;
    }
    
    public javax.swing.Icon getIcon() 
    {
        return new javax.swing.ImageIcon(getClass().getResource("/com/linkare/rec/impl/baseUI/resources/sensor16.gif"));    
    }
    
    public javax.swing.JMenuBar getMenuBar() 
    {
        return null;
    }
    
    public javax.swing.JToolBar getToolBar() 
    {
        return null;
    }
    
    public void headerAvailable(com.linkare.rec.data.config.HardwareAcquisitionConfig header) 
    {
    }
    
    public void newSamples(com.linkare.rec.impl.client.experiment.NewExpDataEvent evt) 
    {
        float ang = 0;
        float inte = 0;
        
        for(int i=evt.getSamplesStartIndex(); i<=evt.getSamplesEndIndex(); i++)
        {                   
            if(model.getValueAt(i, 1) != null && model.getValueAt(i, 2) != null)
            {
                ang = model.getValueAt(i, 1).getValueNumber().floatValue();
                inte = model.getValueAt(i, 2).getValueNumber().floatValue();
                jLabelAng.setText(df.format(ang) + " �");
                jLabelInt.setText(df.format(inte) + " V");
            }
        }
    }
    
    private ExpDataModel model=null;
    public void setExpDataModel(ExpDataModel model)
    {
	if(this.model!=null)
	    this.model.removeExpDataModelListener(this);
	this.model=model;
	if(this.model!=null)
	    this.model.addExpDataModelListener(this);
	
    }
    
    public String getName()
    {
	return "Ang vs I";
    }    
    
    public void dataModelWaiting()
    {
    }
    
    public void dataModelStarted()
    {
    }
    
    public void dataModelStartedNoData()
    {
    }
    
    public void dataModelEnded()
    {
    }
    
    public void dataModelError()
    {
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabelAng;
    private javax.swing.JLabel jLabelInt;
    // End of variables declaration//GEN-END:variables
    
}
