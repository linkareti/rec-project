<project name="ReCCore" default="jarReCSigners" basedir=".">
	<import file="defines.xml"/>	

	<target name="compileReC" depends="prepare">
		<javac 	srcdir="${sourceDir}" destdir="${outputDir}"
			deprecation="yes" 
			source="1.6" target="1.6"
			encoding="UTF-8">
			<classpath refid="rec.classpath"/>
			<include name="com/linkare/**/*.java"/>
			<compilerarg value="-Xlint"/>
		</javac>
   	</target>

	<target name="jarReCData" depends="compileReC">
        	<mkdir dir="${distDir}"/>
        	<jar destfile="${distDir}/ReCData.jar" basedir="${outputDir}">
			<include name="com/linkare/rec/data/**/*.class"/>
		</jar>
    	</target>
	<target name="jarReCMulticast" depends="compileReC">
        	<mkdir dir="${distDir}"/>
        	<jar destfile="${distDir}/ReCMulticastController.jar" basedir="${outputDir}">
			<include name="com/linkare/rec/impl/**/*.class"/>
			<include name="com/linkare/rec/acquisition/**/*.class"/>
		</jar>
    	</target>
	<target name="jarReCClient" depends="compileReC">
        	<mkdir dir="${distDir}"/>
		<copy todir="${outputDir}/com/linkare/rec/impl/baseUI/resources/">
			<fileset dir="${sourceDir}/com/linkare/rec/impl/baseUI/resources/"/>
		</copy>
		<copy todir="${outputDir}/com/linkare/rec/impl/exceptions/resources/">
			<fileset dir="${sourceDir}/com/linkare/rec/impl/exceptions/resources/"/>
		</copy>
        	<jar destfile="${distDir}/ReCClient.jar" basedir="${outputDir}">
			<include name="com/linkare/rec/impl/**/*.class"/>
			<include name="com/linkare/rec/acquisition/**/*.class"/>
			<include name="com/linkare/rec/impl/baseUI/resources/**/*.*"/>
			<include name="com/linkare/rec/impl/exceptions/resources/**/*.*"/>
		</jar>
    	</target>

	<target name="jarReC" depends="jarReCData, jarReCClient, jarReCMulticast"/>
	
	<target name="jarReCSigners" depends="jarReC">
		<signjar  destDir="${distDir}"
			  keystore="${sigFileLocation}" storepass="2n2l1s3" storetype="pkcs12"
			  alias="ISTJavaSign">
    			 <fileset dir="${distDir}" includes="*.jar" excludes="*_sig.jar"/>
			 <globmapper from="*.jar" to="*_sig.jar"/>
		</signjar>
	</target>
	
	<target name="deployReC" depends="jarReCSigners">
		<copy todir="${recserver}/recbase">
                        <fileset dir="${distDir}" includes="ReC*_sig.jar"/>
                </copy>		
		<copy todir="${webserver}/recbase">
                        <fileset dir="${distDir}" includes="ReC*_sig.jar"/>
                </copy>		
	</target>

</project>
