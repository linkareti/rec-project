<h:form xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">

    <p:panel id="panel" header="#{title}" style="margin-bottom:10px;">
        <h:inputHidden id="idInternal"
                       value="#{reservationController.selected.idInternal}"
                       rendered="#{operation != 'create'}" />
        <h:inputHidden id="version"
                       value="#{reservationController.selected.version}"
                       rendered="#{operation != 'create'}" />
        <p:focus for="title" />
        <h:panelGrid columns="3">
            <h:outputLabel value="#{bundle['reservation.title']}" for="title" />
            <p:inputText id="title"
                         value="#{reservationController.selected.title}" required="true"
                         label="#{bundle['reservation.title']}"
                         title="#{bundle['reservation.title']}" />
            <p:message for="title" />
            <h:outputLabel value="#{bundle['reservation.experiment']}"
                           for="experiment" />
            <p:selectOneMenu id="experiment"
                             value="#{reservationController.selected.experiment}"
                             required="true" label="#{bundle['reservation.experiment']}"
                             converter="experimentConverter">
                <f:attribute name="optionClasses" value="option1, option2" />
                <f:selectItems
                    value="#{experimentController.activeItemsAvailableSelectOne}" />
            </p:selectOneMenu>
            <p:message for="experiment" />
            <h:outputLabel value="#{bundle['reservation.reservedBy']}" for="user"
                           rendered="#{!userView.external}" />
            <p:selectOneMenu id="user"
                             value="#{reservationController.selected.user}"
                             label="#{bundle['reservation.reservedBy']}"
                             required="#{!userView.external}" converter="userConverter"
                             rendered="#{!userView.external}">
                <f:selectItems value="#{userController.itemsAvailableSelectOne}" />
            </p:selectOneMenu>
            <p:message for="user" />
            <h:outputLabel value="#{bundle['reservation.reservedTo']}" for="group"
                           rendered="#{!userView.external}" />
            <p:selectOneMenu id="group"
                             value="#{reservationController.selected.group}"
                             label="#{bundle['reservation.reservedTo']}"
                             required="#{!userView.external}" converter="groupConverter"
                             rendered="#{!userView.external}">
                <f:selectItems value="#{groupController.itemsAvailableSelectOne}" />
            </p:selectOneMenu>
            <p:message for="group" />
            <h:outputLabel for="startDate"
                           value="#{bundle['reservation.startDate']}" />
            <p:inputMask id="startDate"
                         value="#{reservationController.selected.startDate}"
                         mask="99/99/9999 99:99" label="#{bundle['reservation.startDate']}"
                         required="#{!userView.external}">
                <f:convertDateTime timeZone="Europe/Lisbon" type="both"
                                   pattern="dd/MM/yyyy HH:mm" />
            </p:inputMask>
            <p:message for="startDate" />
            <h:outputLabel for="endDate" value="#{bundle['reservation.endDate']}" />
            <p:inputMask id="endDate"
                         value="#{reservationController.selected.endDate}"
                         label="#{bundle['reservation.endDate']}" mask="99/99/9999 99:99"
                         required="#{!userView.external}">
                <f:convertDateTime timeZone="Europe/Lisbon" type="both"
                                   pattern="dd/MM/yyyy HH:mm" />
            </p:inputMask>
            <p:message for="endDate" />
        </h:panelGrid>

        <h:panelGroup rendered="#{operation == 'create'}">
            <p:commandButton action="#{reservationController.create}" value="#{bundle['operation.save']}" 
                             onclick="this.disabled=true" oncomplete="this.disabled=false"/>
        </h:panelGroup>
        <h:panelGroup rendered="#{operation == 'edit'}">
            <p:commandButton action="#{reservationController.update}" value="#{bundle['operation.save']}"
                             onclick="this.disabled=true" oncomplete="this.disabled=false"/>
        </h:panelGroup>
    </p:panel>
</h:form>