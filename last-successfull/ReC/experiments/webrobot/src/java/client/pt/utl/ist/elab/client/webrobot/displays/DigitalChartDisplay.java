/*
 * DigitalChartDisplay.java
 *
 * Created on 6 de Junho de 2003, 19:38
 */

package pt.utl.ist.elab.client.webrobot.displays;

import com.linkare.rec.impl.client.experiment.DataDisplayEnum;
import pt.utl.ist.elab.client.webrobot.displays.proxys.DefaultChartModelProxy;
import pt.utl.ist.elab.client.webrobot.utils.PrintComponent;

import com.linkare.rec.impl.client.experiment.ExpDataDisplay;
import com.linkare.rec.impl.client.experiment.ExpDataModel;
import com.linkare.rec.impl.client.experiment.ExpDataModelListener;

/**
 * 
 * @author Andrï¿½
 */
public class DigitalChartDisplay extends javax.swing.JPanel implements ExpDataDisplay, ExpDataModelListener {

	/**
	 * 
	 */
	private static final long serialVersionUID = -8867121109535980389L;

	/** Creates new form DigitalChartDisplay */
	public DigitalChartDisplay() {
		initComponents();
		dataDigital = new DefaultChartModelProxy(8, 8, true);
		final org.jfree.chart.JFreeChart chart = org.jfree.chart.ChartFactory.createXYLineChart(name, "Tempo(s)",
				"Valor", dataDigital, org.jfree.chart.plot.PlotOrientation.VERTICAL, true, true, false);
		chartPanel = new org.jfree.chart.ChartPanel(chart);
		chartPanel.setPreferredSize(new java.awt.Dimension(600, 400));
		add(chartPanel, java.awt.BorderLayout.CENTER);
	}

	/**
	 * This method is called from within the constructor to initialize the form.
	 * WARNING: Do NOT modify this code. The content of this method is always
	 * regenerated by the Form Editor.
	 */
	private void initComponents() {//GEN-BEGIN:initComponents
		jToolBarChart = new javax.swing.JToolBar();
		jButtonB0 = new javax.swing.JButton();
		jButtonB1 = new javax.swing.JButton();
		jButtonB2 = new javax.swing.JButton();
		jButtonB3 = new javax.swing.JButton();
		jButtonB4 = new javax.swing.JButton();
		jButtonB5 = new javax.swing.JButton();
		jButtonB6 = new javax.swing.JButton();
		jButtonB7 = new javax.swing.JButton();
		jButtonPrint = new javax.swing.JButton();

		setLayout(new java.awt.BorderLayout());

		jButtonB0.setFont(new java.awt.Font("Comic Sans MS", 1, 12));
		jButtonB0.setForeground(new java.awt.Color(0, 51, 153));
		jButtonB0.setText("b0");
		jButtonB0.setToolTipText("Ver b0?");
		jButtonB0.setMaximumSize(new java.awt.Dimension(30, 28));
		jButtonB0.setMinimumSize(new java.awt.Dimension(30, 28));
		jButtonB0.setPreferredSize(new java.awt.Dimension(30, 28));
		jButtonB0.setEnabled(false);
		jButtonB0.addMouseListener(new java.awt.event.MouseAdapter() {
			@Override
			public void mousePressed(final java.awt.event.MouseEvent evt) {
				jButtonB0MousePressed(evt);
			}
		});

		jToolBarChart.add(jButtonB0);

		jButtonB1.setFont(new java.awt.Font("Comic Sans MS", 1, 12));
		jButtonB1.setForeground(new java.awt.Color(0, 51, 153));
		jButtonB1.setText("b1");
		jButtonB1.setToolTipText("Ver b1?");
		jButtonB1.setMaximumSize(new java.awt.Dimension(30, 28));
		jButtonB1.setMinimumSize(new java.awt.Dimension(30, 28));
		jButtonB1.setPreferredSize(new java.awt.Dimension(30, 28));
		jButtonB1.addMouseListener(new java.awt.event.MouseAdapter() {
			@Override
			public void mousePressed(final java.awt.event.MouseEvent evt) {
				jButtonB1MousePressed(evt);
			}
		});

		jToolBarChart.add(jButtonB1);

		jButtonB2.setFont(new java.awt.Font("Comic Sans MS", 1, 12));
		jButtonB2.setForeground(new java.awt.Color(0, 51, 153));
		jButtonB2.setText("b2");
		jButtonB2.setToolTipText("Ver b2?");
		jButtonB2.setMaximumSize(new java.awt.Dimension(30, 28));
		jButtonB2.setMinimumSize(new java.awt.Dimension(30, 28));
		jButtonB2.setPreferredSize(new java.awt.Dimension(30, 28));
		jButtonB2.addMouseListener(new java.awt.event.MouseAdapter() {
			@Override
			public void mousePressed(final java.awt.event.MouseEvent evt) {
				jButtonB2MousePressed(evt);
			}
		});

		jToolBarChart.add(jButtonB2);

		jButtonB3.setFont(new java.awt.Font("Comic Sans MS", 1, 12));
		jButtonB3.setForeground(new java.awt.Color(0, 51, 153));
		jButtonB3.setText("b3");
		jButtonB3.setToolTipText("Ver b3?");
		jButtonB3.setMaximumSize(new java.awt.Dimension(30, 28));
		jButtonB3.setMinimumSize(new java.awt.Dimension(30, 28));
		jButtonB3.setPreferredSize(new java.awt.Dimension(30, 28));
		jButtonB3.addMouseListener(new java.awt.event.MouseAdapter() {
			@Override
			public void mousePressed(final java.awt.event.MouseEvent evt) {
				jButtonB3MousePressed(evt);
			}
		});

		jToolBarChart.add(jButtonB3);

		jButtonB4.setFont(new java.awt.Font("Comic Sans MS", 1, 12));
		jButtonB4.setForeground(new java.awt.Color(0, 51, 153));
		jButtonB4.setText("b4");
		jButtonB4.setToolTipText("Ver b4?");
		jButtonB4.setMaximumSize(new java.awt.Dimension(30, 28));
		jButtonB4.setMinimumSize(new java.awt.Dimension(30, 28));
		jButtonB4.setPreferredSize(new java.awt.Dimension(30, 28));
		jButtonB4.addMouseListener(new java.awt.event.MouseAdapter() {
			@Override
			public void mousePressed(final java.awt.event.MouseEvent evt) {
				jButtonB4MousePressed(evt);
			}
		});

		jToolBarChart.add(jButtonB4);

		jButtonB5.setFont(new java.awt.Font("Comic Sans MS", 1, 12));
		jButtonB5.setForeground(new java.awt.Color(0, 51, 153));
		jButtonB5.setText("b5");
		jButtonB5.setToolTipText("Ver b5?");
		jButtonB5.setMaximumSize(new java.awt.Dimension(30, 28));
		jButtonB5.setMinimumSize(new java.awt.Dimension(30, 28));
		jButtonB5.setPreferredSize(new java.awt.Dimension(30, 28));
		jButtonB5.addMouseListener(new java.awt.event.MouseAdapter() {
			@Override
			public void mousePressed(final java.awt.event.MouseEvent evt) {
				jButtonB5MousePressed(evt);
			}
		});

		jToolBarChart.add(jButtonB5);

		jButtonB6.setFont(new java.awt.Font("Comic Sans MS", 1, 12));
		jButtonB6.setForeground(new java.awt.Color(0, 51, 153));
		jButtonB6.setText("b6");
		jButtonB6.setToolTipText("Ver b6?");
		jButtonB6.setMaximumSize(new java.awt.Dimension(30, 28));
		jButtonB6.setMinimumSize(new java.awt.Dimension(30, 28));
		jButtonB6.setPreferredSize(new java.awt.Dimension(30, 28));
		jButtonB6.addMouseListener(new java.awt.event.MouseAdapter() {
			@Override
			public void mousePressed(final java.awt.event.MouseEvent evt) {
				jButtonB6MousePressed(evt);
			}
		});

		jToolBarChart.add(jButtonB6);

		jButtonB7.setFont(new java.awt.Font("Comic Sans MS", 1, 12));
		jButtonB7.setForeground(new java.awt.Color(0, 51, 153));
		jButtonB7.setText("b7");
		jButtonB7.setToolTipText("Ver b7?");
		jButtonB7.setMaximumSize(new java.awt.Dimension(30, 28));
		jButtonB7.setMinimumSize(new java.awt.Dimension(30, 28));
		jButtonB7.setPreferredSize(new java.awt.Dimension(30, 28));
		jButtonB7.addMouseListener(new java.awt.event.MouseAdapter() {
			@Override
			public void mousePressed(final java.awt.event.MouseEvent evt) {
				jButtonB7MousePressed(evt);
			}
		});

		jToolBarChart.add(jButtonB7);

		jButtonPrint.setIcon(new javax.swing.ImageIcon(getClass().getResource(
				"/pt/utl/ist/elab/client/webrobot/displays/resources/Print16.gif")));
		jButtonPrint.setToolTipText("Imprimir gr\u00e1fico...");
		jButtonPrint.setMaximumSize(new java.awt.Dimension(30, 28));
		jButtonPrint.setMinimumSize(new java.awt.Dimension(30, 28));
		jButtonPrint.setPreferredSize(new java.awt.Dimension(30, 28));
		jButtonPrint.addActionListener(new java.awt.event.ActionListener() {
			@Override
			public void actionPerformed(final java.awt.event.ActionEvent evt) {
				jButtonPrintActionPerformed(evt);
			}
		});

		jToolBarChart.add(jButtonPrint);

		add(jToolBarChart, java.awt.BorderLayout.NORTH);

	}//GEN-END:initComponents

	private void jButtonB7MousePressed(final java.awt.event.MouseEvent evt) {// GEN-FIRST:event_jButtonB7MousePressed
		if (jButtonB7.isEnabled()) {
			dataDigital.setSeriesVisible(true, 7);
			jButtonB7.setEnabled(false);
		} else {
			dataDigital.setSeriesVisible(false, 7);
			jButtonB7.setEnabled(true);
		}
	}// GEN-LAST:event_jButtonB7MousePressed

	private void jButtonB6MousePressed(final java.awt.event.MouseEvent evt) {// GEN-FIRST:event_jButtonB6MousePressed
		if (jButtonB6.isEnabled()) {
			dataDigital.setSeriesVisible(true, 6);
			jButtonB6.setEnabled(false);
		} else {
			dataDigital.setSeriesVisible(false, 6);
			jButtonB6.setEnabled(true);
		}
	}// GEN-LAST:event_jButtonB6MousePressed

	private void jButtonB5MousePressed(final java.awt.event.MouseEvent evt) {// GEN-FIRST:event_jButtonB5MousePressed
		if (jButtonB5.isEnabled()) {
			dataDigital.setSeriesVisible(true, 5);
			jButtonB5.setEnabled(false);
		} else {
			dataDigital.setSeriesVisible(false, 5);
			jButtonB5.setEnabled(true);
		}
	}// GEN-LAST:event_jButtonB5MousePressed

	private void jButtonB4MousePressed(final java.awt.event.MouseEvent evt) {// GEN-FIRST:event_jButtonB4MousePressed
		if (jButtonB4.isEnabled()) {
			dataDigital.setSeriesVisible(true, 4);
			jButtonB4.setEnabled(false);
		} else {
			dataDigital.setSeriesVisible(false, 4);
			jButtonB4.setEnabled(true);
		}
	}// GEN-LAST:event_jButtonB4MousePressed

	private void jButtonB3MousePressed(final java.awt.event.MouseEvent evt) {// GEN-FIRST:event_jButtonB3MousePressed
		if (jButtonB3.isEnabled()) {
			dataDigital.setSeriesVisible(true, 3);
			jButtonB3.setEnabled(false);
		} else {
			dataDigital.setSeriesVisible(false, 3);
			jButtonB3.setEnabled(true);
		}
	}// GEN-LAST:event_jButtonB3MousePressed

	private void jButtonB2MousePressed(final java.awt.event.MouseEvent evt) {// GEN-FIRST:event_jButtonB2MousePressed
		if (jButtonB2.isEnabled()) {
			dataDigital.setSeriesVisible(true, 2);
			jButtonB2.setEnabled(false);
		} else {
			dataDigital.setSeriesVisible(false, 2);
			jButtonB2.setEnabled(true);
		}
	}// GEN-LAST:event_jButtonB2MousePressed

	private void jButtonB1MousePressed(final java.awt.event.MouseEvent evt) {// GEN-FIRST:event_jButtonB1MousePressed
		if (jButtonB1.isEnabled()) {
			dataDigital.setSeriesVisible(true, 1);
			jButtonB1.setEnabled(false);
		} else {
			dataDigital.setSeriesVisible(false, 1);
			jButtonB1.setEnabled(true);
		}
	}// GEN-LAST:event_jButtonB1MousePressed

	private void jButtonB0MousePressed(final java.awt.event.MouseEvent evt) {// GEN-FIRST:event_jButtonB0MousePressed
		if (jButtonB0.isEnabled()) {
			dataDigital.setSeriesVisible(true, 0);
			jButtonB0.setEnabled(false);
		} else {
			dataDigital.setSeriesVisible(false, 0);
			jButtonB0.setEnabled(true);
		}
	}// GEN-LAST:event_jButtonB0MousePressed

	private void jButtonPrintActionPerformed(final java.awt.event.ActionEvent evt) {// GEN-FIRST:event_jButtonPrintActionPerformed
		printChart();
	}// GEN-LAST:event_jButtonPrintActionPerformed

	public void printChart() {
		new PrintComponent(chartPanel);
	}

	@Override
	public javax.swing.JComponent getDisplay() {
		return this;
	}

	@Override
	public javax.swing.Icon getIcon() {
		return icon;
	}

	@Override
	public String getName() {
		return name;
	}

	@Override
	public void setExpDataModel(final ExpDataModel expDataModel) {
		if (expDataModel != null) {
			expDataModel.removeExpDataModelListener(this);
		}

		this.expDataModel = expDataModel;

		if (this.expDataModel != null) {
			this.expDataModel.addExpDataModelListener(this);
			dataDigital.setExpDataModel(expDataModel);
		}
	}

	@Override
	public javax.swing.JMenuBar getMenuBar() {
		return null;
	}

	@Override
	public javax.swing.JToolBar getToolBar() {
		return null;
	}

	public void dataModelRunning() {
		dataDigital.dataModelRunning();
	}

	@Override
	public void dataModelStoped() {
		dataDigital.dataModelStoped();
	}

	public void headerAvailable(final com.linkare.rec.data.config.HardwareAcquisitionConfig hardwareAcquisitionConfig) {
		dataDigital.headerAvailable(hardwareAcquisitionConfig);
	}

	@Override
	public void newSamples(final com.linkare.rec.impl.client.experiment.NewExpDataEvent newExpDataEvent) {
		dataDigital.newSamples(newExpDataEvent);
	}

	@Override
	public void dataModelEnded() {
	}

	@Override
	public void dataModelError() {
	}

	@Override
	public void dataModelStarted() {
		headerAvailable(expDataModel.getAcquisitionConfig());
	}

	@Override
	public void dataModelStartedNoData() {
	}

	@Override
	public void dataModelWaiting() {
	}

	// Variables declaration - do not modify//GEN-BEGIN:variables
	private javax.swing.JButton jButtonB1;
	private javax.swing.JButton jButtonPrint;
	private javax.swing.JButton jButtonB4;
	private javax.swing.JButton jButtonB3;
	private javax.swing.JButton jButtonB2;
	private javax.swing.JButton jButtonB5;
	private javax.swing.JButton jButtonB0;
	private javax.swing.JButton jButtonB7;
	private javax.swing.JToolBar jToolBarChart;
	private javax.swing.JButton jButtonB6;
	// End of variables declaration//GEN-END:variables
	private ExpDataModel expDataModel;
	private final javax.swing.ImageIcon icon = new javax.swing.ImageIcon(getClass().getResource(
			"/pt/utl/ist/elab/client/webrobot/displays/resources/ChartD16.gif"));
	private final String name = "Entradas digitais";
	private DefaultChartModelProxy dataDigital = null;
	private final org.jfree.chart.ChartPanel chartPanel;
    @Override
    public DataDisplayEnum getDisplayType() {
        return DataDisplayEnum.CHART;
    }
}
