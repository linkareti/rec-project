<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

	<changeSet author="pzenida" id="initial-changeset-1">
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="administrative_division" />
			</not>
		</preConditions>
		<createTable tableName="administrative_division">
			<column name="instance_type" type="VARCHAR(31)">
				<constraints nullable="false" />
			</column>
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="creation_date" type="datetime(6)" />
			<column name="uuid" type="VARCHAR(75)" />
			<column name="active" type="BIT(1)">
				<constraints nullable="false" />
			</column>
			<column name="code" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
			<column name="name" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
			<column name="key_district" type="BIGINT" />
			<column name="key_county" type="BIGINT" />
			<column name="key_country" type="BIGINT" />
		</createTable>
	</changeSet>

	<changeSet author="pzenida" id="initial-changeset-2">
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="birth_registration" />
			</not>
		</preConditions>
		<createTable tableName="birth_registration">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="creation_date" type="datetime(6)" />
			<column name="uuid" type="VARCHAR(75)" />
			<column name="version" type="INT" />
			<column name="address_type" type="VARCHAR(75)" />
			<column name="location" type="VARCHAR(150)" />
			<column name="street" type="VARCHAR(255)" />
			<column name="zip_code" type="VARCHAR(50)" />
			<column name="birth_registration_status" type="VARCHAR(255)" />
			<column name="date_of_birth" type="datetime(6)">
				<constraints nullable="false" />
			</column>
			<column name="deceased" type="BIT(1)" />
			<column name="deceased_date" type="datetime(6)" />
			<column name="family_name" type="VARCHAR(150)">
				<constraints nullable="false" />
			</column>
			<column name="gender" type="VARCHAR(75)">
				<constraints nullable="false" />
			</column>
			<column name="given_name" type="VARCHAR(150)">
				<constraints nullable="false" />
			</column>
			<column name="key_country" type="BIGINT" />
			<column name="key_parish" type="BIGINT" />
			<column name="key_first_parent" type="BIGINT" />
			<column name="key_hospital_unit" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="key_nationality" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="key_naturality" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="key_second_parent" type="BIGINT" />
		</createTable>
	</changeSet>

	<changeSet author="pzenida" id="initial-changeset-3">
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="configuration" />
			</not>
		</preConditions>
		<createTable tableName="configuration">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="creation_date" type="datetime(6)" />
			<column name="uuid" type="VARCHAR(75)" />
			<column name="date_time_pattern" type="VARCHAR(30)">
				<constraints nullable="false" />
			</column>
			<column name="allowed_file_extension" type="VARCHAR(150)">
				<constraints nullable="false" />
			</column>
			<column name="from_email_address" type="VARCHAR(150)">
				<constraints nullable="false" />
			</column>
			<column name="from_email_name" type="VARCHAR(150)">
				<constraints nullable="false" />
			</column>
			<column name="locale" type="VARCHAR(10)">
				<constraints nullable="false" />
			</column>
			<column name="max_upload_size_in_bytes" type="INT">
				<constraints nullable="false" />
			</column>
			<column name="time_pattern" type="VARCHAR(15)">
				<constraints nullable="false" />
			</column>
			<column name="time_zone" type="VARCHAR(50)">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet author="pzenida" id="initial-changeset-4">
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="country" />
			</not>
		</preConditions>
		<createTable tableName="country">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="creation_date" type="datetime(6)" />
			<column name="uuid" type="VARCHAR(75)" />
			<column name="active" type="BIT(1)">
				<constraints nullable="false" />
			</column>
			<column name="code" type="VARCHAR(2)">
				<constraints nullable="false" />
			</column>
			<column name="name" type="VARCHAR(150)">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet author="pzenida" id="initial-changeset-5">
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="mapper" />
			</not>
		</preConditions>
		<createTable tableName="mapper">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="creation_date" type="datetime(6)" />
			<column name="uuid" type="VARCHAR(75)" />
			<column name="external_id" type="VARCHAR(255)" />
			<column name="internal_id" type="BIGINT" />
			<column name="module" type="VARCHAR(255)" />
		</createTable>
	</changeSet>

	<changeSet author="pzenida" id="initial-changeset-6">
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="message_template" />
			</not>
		</preConditions>
		<createTable tableName="message_template">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="creation_date" type="datetime(6)" />
			<column name="uuid" type="VARCHAR(75)" />
			<column name="code" type="VARCHAR(75)">
				<constraints nullable="false" />
			</column>
			<column name="content" type="TEXT">
				<constraints nullable="false" />
			</column>
			<column name="subject" type="VARCHAR(255)" />
			<column name="type" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet author="pzenida" id="initial-changeset-7">
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="naturality" />
			</not>
		</preConditions>
		<createTable tableName="naturality">
			<column name="instance_type" type="VARCHAR(31)">
				<constraints nullable="false" />
			</column>
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="creation_date" type="datetime(6)" />
			<column name="uuid" type="VARCHAR(75)" />
			<column name="location" type="VARCHAR(255)" />
			<column name="latitude" type="FLOAT(12)" />
			<column name="longitude" type="FLOAT(12)" />
			<column name="key_parish" type="TINYBLOB" />
			<column name="key_country" type="BIGINT">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet author="pzenida" id="initial-changeset-8">
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="organization" />
			</not>
		</preConditions>
		<createTable tableName="organization">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="creation_date" type="datetime(6)" />
			<column name="uuid" type="VARCHAR(75)" />
			<column name="active" type="BIT(1)" />
			<column name="name" type="VARCHAR(150)" />
			<column name="organization_type" type="VARCHAR(75)" />
		</createTable>
	</changeSet>

	<changeSet author="pzenida" id="initial-changeset-9">
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="parent" />
			</not>
		</preConditions>
		<createTable tableName="parent">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="creation_date" type="datetime(6)" />
			<column name="uuid" type="VARCHAR(75)" />
			<column name="academic_degree" type="VARCHAR(75)">
				<constraints nullable="false" />
			</column>
			<column name="address_type" type="VARCHAR(75)" />
			<column name="location" type="VARCHAR(150)" />
			<column name="street" type="VARCHAR(255)" />
			<column name="zip_code" type="VARCHAR(50)" />
			<column name="date_of_birth" type="date">
				<constraints nullable="false" />
			</column>
			<column name="email" type="VARCHAR(150)">
				<constraints nullable="false" />
			</column>
			<column name="family_name" type="VARCHAR(150)">
				<constraints nullable="false" />
			</column>
			<column name="father_name" type="VARCHAR(255)" />
			<column name="gender" type="VARCHAR(75)">
				<constraints nullable="false" />
			</column>
			<column name="given_name" type="VARCHAR(150)">
				<constraints nullable="false" />
			</column>
			<column name="identification_card_number" type="VARCHAR(75)">
				<constraints nullable="false" />
			</column>
			<column name="identification_card_type" type="VARCHAR(75)">
				<constraints nullable="false" />
			</column>
			<column name="job" type="VARCHAR(75)">
				<constraints nullable="false" />
			</column>
			<column name="job_condition" type="VARCHAR(75)">
				<constraints nullable="false" />
			</column>
			<column name="job_status" type="VARCHAR(75)">
				<constraints nullable="false" />
			</column>
			<column name="marital_status" type="VARCHAR(75)">
				<constraints nullable="false" />
			</column>
			<column name="mother_name" type="VARCHAR(255)" />
			<column name="key_country" type="BIGINT" />
			<column name="key_parish" type="BIGINT" />
			<column name="key_nationality" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="key_naturality" type="BIGINT">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet author="pzenida" id="initial-changeset-10">
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="table_hilo_generator" />
			</not>
		</preConditions>
		<createTable tableName="table_hilo_generator">
			<column name="table_name" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
			<column name="next_val" type="BIGINT" />
		</createTable>
	</changeSet>

	<changeSet author="pzenida" id="initial-changeset-11">
		<addPrimaryKey columnNames="id" constraintName="PRIMARY"
			tableName="administrative_division" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-12">
		<addPrimaryKey columnNames="id" constraintName="PRIMARY"
			tableName="birth_registration" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-13">
		<addPrimaryKey columnNames="id" constraintName="PRIMARY"
			tableName="configuration" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-14">
		<addPrimaryKey columnNames="id" constraintName="PRIMARY"
			tableName="country" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-15">
		<addPrimaryKey columnNames="id" constraintName="PRIMARY"
			tableName="mapper" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-16">
		<addPrimaryKey columnNames="id" constraintName="PRIMARY"
			tableName="message_template" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-17">
		<addPrimaryKey columnNames="id" constraintName="PRIMARY"
			tableName="naturality" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-18">
		<addPrimaryKey columnNames="id" constraintName="PRIMARY"
			tableName="organization" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-19">
		<addPrimaryKey columnNames="id" constraintName="PRIMARY"
			tableName="parent" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-20">
		<addPrimaryKey columnNames="table_name" constraintName="PRIMARY"
			tableName="table_hilo_generator" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-21">
		<addUniqueConstraint columnNames="external_id, module"
			constraintName="uk_external_id_and_module_on_mapper" tableName="mapper" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-22">
		<addUniqueConstraint columnNames="code"
			constraintName="uk_code_on_country" tableName="country" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-23">
		<addUniqueConstraint columnNames="code"
			constraintName="uk_code_on_administrative_division" tableName="administrative_division" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-25">
		<addUniqueConstraint columnNames="code"
			constraintName="uk_code_on_message_template" tableName="message_template" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-26">
		<createIndex indexName="fk_hospital_unit_on_birth_registration"
			tableName="birth_registration">
			<column name="key_hospital_unit" />
		</createIndex>
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-27">
		<createIndex indexName="fk_county_on_parish" tableName="administrative_division">
			<column name="key_county" />
		</createIndex>
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-28">
		<createIndex indexName="fk_country_on_naturality"
			tableName="naturality">
			<column name="key_country" />
		</createIndex>
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-29">
		<createIndex indexName="fk_1st_parent_on_birth_registration"
			tableName="birth_registration">
			<column name="key_first_parent" />
		</createIndex>
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-30">
		<createIndex indexName="fk_naturality_on_parent"
			tableName="parent">
			<column name="key_naturality" />
		</createIndex>
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-31">
		<createIndex indexName="fk_naturality_on_birth_registration"
			tableName="birth_registration">
			<column name="key_naturality" />
		</createIndex>
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-32">
		<createIndex indexName="fk_parish_on_birth_registration"
			tableName="birth_registration">
			<column name="key_parish" />
		</createIndex>
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-33">
		<createIndex indexName="fk_country_on_district" tableName="administrative_division">
			<column name="key_country" />
		</createIndex>
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-34">
		<createIndex indexName="fk_country_on_parent" tableName="parent">
			<column name="key_country" />
		</createIndex>
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-35">
		<createIndex indexName="fk_2nd_parent_on_birth_registration"
			tableName="birth_registration">
			<column name="key_second_parent" />
		</createIndex>
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-36">
		<createIndex indexName="fk_district_on_county" tableName="administrative_division">
			<column name="key_district" />
		</createIndex>
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-37">
		<createIndex indexName="fk_nationality_on_parent"
			tableName="parent">
			<column name="key_nationality" />
		</createIndex>
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-38">
		<createIndex indexName="fk_nationality_on_birth_registration"
			tableName="birth_registration">
			<column name="key_nationality" />
		</createIndex>
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-39">
		<createIndex indexName="fk_country_on_birth_registration"
			tableName="birth_registration">
			<column name="key_country" />
		</createIndex>
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-40">
		<createIndex indexName="fk_parish_on_parent" tableName="parent">
			<column name="key_parish" />
		</createIndex>
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-41">
		<addForeignKeyConstraint baseColumnNames="key_hospital_unit"
			baseTableName="birth_registration" constraintName="fk_hospital_unit_on_birth_registration"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="organization" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-42">
		<addForeignKeyConstraint baseColumnNames="key_county"
			baseTableName="administrative_division" constraintName="fk_county_on_parish"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="administrative_division" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-43">
		<addForeignKeyConstraint baseColumnNames="key_country"
			baseTableName="naturality" constraintName="fk_country_on_naturality"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="country" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-44">
		<addForeignKeyConstraint baseColumnNames="key_first_parent"
			baseTableName="birth_registration" constraintName="fk_1st_parent_on_birth_registration"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="parent" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-45">
		<addForeignKeyConstraint baseColumnNames="key_naturality"
			baseTableName="parent" constraintName="fk_naturality_on_parent"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="naturality" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-46">
		<addForeignKeyConstraint baseColumnNames="key_naturality"
			baseTableName="birth_registration" constraintName="fk_naturality_on_birth_registration"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="naturality" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-47">
		<addForeignKeyConstraint baseColumnNames="key_parish"
			baseTableName="birth_registration" constraintName="fk_parish_on_birth_registration"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="administrative_division" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-48">
		<addForeignKeyConstraint baseColumnNames="key_country"
			baseTableName="administrative_division" constraintName="fk_country_on_district"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="country" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-49">
		<addForeignKeyConstraint baseColumnNames="key_country"
			baseTableName="parent" constraintName="fk_country_on_parent"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="country" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-50">
		<addForeignKeyConstraint baseColumnNames="key_second_parent"
			baseTableName="birth_registration" constraintName="fk_2nd_parent_on_birth_registration"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="parent" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-51">
		<addForeignKeyConstraint baseColumnNames="key_district"
			baseTableName="administrative_division" constraintName="fk_district_on_county"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="administrative_division" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-52">
		<addForeignKeyConstraint baseColumnNames="key_nationality"
			baseTableName="parent" constraintName="fk_nationality_on_parent"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="country" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-53">
		<addForeignKeyConstraint baseColumnNames="key_nationality"
			baseTableName="birth_registration" constraintName="fk_nationality_on_birth_registration"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="country" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-54">
		<addForeignKeyConstraint baseColumnNames="key_country"
			baseTableName="birth_registration" constraintName="fk_country_on_birth_registration"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="country" />
	</changeSet>
	<changeSet author="pzenida" id="initial-changeset-55">
		<addForeignKeyConstraint baseColumnNames="key_parish"
			baseTableName="parent" constraintName="fk_parish_on_parent"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="administrative_division" />
	</changeSet>
</databaseChangeLog>