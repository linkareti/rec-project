<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.prime.com.tr/ui">

<ui:composition template="/index.xhtml">
	<ui:define name="title">
		<h:outputText value="#{bundle['page.reservation.scheduler.title']}"></h:outputText>
	</ui:define>

	<ui:define name="body">
		<h:panelGroup layout="block">
			<h:form>
				<p:ajaxStatus style="height:24px;display:block;">
					<f:facet name="start">
						<h:graphicImage value="images/ajaxloading.gif" />
					</f:facet>

					<f:facet name="complete">
						<h:outputText value="" />
					</f:facet>
				</p:ajaxStatus>

				<h:panelGrid columns="1" width="90%">

					<p:schedule value="#{scheduleController.eventModel}"
						editable="true" widgetVar="myschedule" resizable="true"
						eventSelectListener="#{scheduleController.onEventSelect}"
						dateSelectListener="#{scheduleController.onDateSelect}"
						eventMoveListener="#{scheduleController.onEventMove}"
						eventResizeListener="#{scheduleController.onEventResize}"
						onEventMoveUpdate="messages" onEventResizeUpdate="messages"
						locale="pt">

						<p:draggable dragOnly="true" />
						<p:resizable animate="true" effect="backBoth" minWidth="300"
							minHeight="150" maxWidth="600" maxHeight="350" />

						<p:scheduleEventDialog header="Event Details">
							<h:panelGrid columns="2">
								<h:inputHidden id="idInternal"
									value="#{scheduleController.event.idInternal}" />
								<h:inputHidden id="id" value="#{scheduleController.event.id}" />
								<h:outputLabel for="title2"
									value="#{bundle['reservation.title']}" />
								<h:inputText id="title2"
									value="#{scheduleController.event.title}" />
								<h:outputLabel value="#{bundle['reservation.experiment']}"
									for="experiment2" />
								<h:selectOneMenu id="experiment2"
									value="#{scheduleController.event.experiment}"
									title="#{bundle['reservation.experiment']}" required="true"
									converter="experimentConverter">
									<f:selectItems
										value="#{experimentController.itemsAvailableSelectOne}" />
								</h:selectOneMenu>
								<h:outputLabel value="#{bundle['reservation.reservedBy']}"
									for="user2" rendered="#{!userView.external}" />
								<h:selectOneMenu id="user2"
									value="#{scheduleController.event.userPrincipal}"
									title="#{bundle['reservation.user']}"
									required="#{!userView.external}"
									rendered="#{!userView.external}"
									converter="userPrincipalConverter">
									<f:selectItems
										value="#{userPrincipalController.itemsAvailableSelectOne}" />
								</h:selectOneMenu>
								<h:outputLabel value="#{bundle['reservation.reservedBy']}"
									for="externalUser2" rendered="#{userView.external}" />
								<h:inputText id="externalUser2"
									value="#{scheduleController.event.externalUser}"
									required="#{userView.external}" rendered="#{userView.external}" />
								<h:outputLabel value="#{bundle['reservation.reservedTo']}"
									for="group2" rendered="#{!userView.external}" />
								<h:selectOneMenu id="group2"
									value="#{scheduleController.event.userGroup}"
									title="#{bundle['reservation.group']}"
									required="#{!userView.external}" converter="userGroupConverter"
									rendered="#{!userView.external}">
									<f:selectItems
										value="#{userGroupController.itemsAvailableSelectOne}" />
								</h:selectOneMenu>
								<h:outputLabel value="#{bundle['reservation.reservedTo']}"
									for="externalCourse2" rendered="#{userView.external}" />
								<h:selectOneMenu id="externalCourse2"
									value="#{scheduleController.event.externalCourse}"
									required="#{userView.external}" rendered="#{userView.external}">
									<f:selectItems
										value="#{externalCourseController.itemsAvailableSelectOne}" />
								</h:selectOneMenu>
								<h:outputLabel for="startDate2"
									value="#{bundle['reservation.startDate']}" />
								<p:calendar id="startDate2"
									value="#{scheduleController.event.startDate}"
									pattern="dd/MM/yyyy" />
								<h:outputLabel for="endDate2"
									value="#{bundle['reservation.endDate']}" />
								<p:calendar id="endDate2" navigator="true"
									value="#{scheduleController.event.endDate}"
									pattern="dd/MM/yyyy" />
								<h:outputLabel for="startTimeSlot2"
									value="#{bundle['reservation.startTimeSlot']}" />
								<h:selectOneMenu id="startTimeSlot2"
									value="#{scheduleController.event.startTimeSlot}"
									title="#{bundle['reservation.startTimeSlot']}" required="true">
									<f:selectItems
										value="#{reservationController.timeSlotSelectOne}" />
								</h:selectOneMenu>
								<h:outputLabel for="endTimeSlot2"
									value="#{bundle['reservation.endTimeSlot']}" />
								<h:selectOneMenu id="endTimeSlot2"
									value="#{scheduleController.event.endTimeSlot}"
									title="#{bundle['reservation.endTimeSlot']}" required="true">
									<f:selectItems
										value="#{reservationController.timeSlotSelectOne}" />
								</h:selectOneMenu>
								<p:commandButton value="#{bundle['operation.save']}"
									actionListener="#{scheduleController.addEvent}"
									oncomplete="myschedule.update();" />
								<p:commandButton value="#{bundle['operation.remove']}"
									actionListener="#{scheduleController.removeEvent}"
									oncomplete="myschedule.update();" />
								<p:commandButton type="reset"
									value="#{bundle['operation.reset']}" />
							</h:panelGrid>
						</p:scheduleEventDialog>
					</p:schedule>
				</h:panelGrid>
			</h:form>
		</h:panelGroup>
	</ui:define>
</ui:composition>
</html>